#:import Factory kivy.factory.Factory

# <ProgressPopup>:
#     bar: bar
#     on_open: self.start()
#     ProgressBar:
#         id: bar

# TODO set max and min height for popups

<ProgressPopup>:
    bar: bar
    phase_info: phase_info
    step_info: step_info
    FloatLayout:
        ProgressLabel:
            id: phase_info
            pos_hint: {'center_x': 0.5, 'center_y': 0.75}
            valign: 'center'
            text: "TEST"
        ProgressBar:
            id: bar
            pos_hint: {'center_x': 0.5, 'center_y': .5}
            size_hint: 0.9, 1
        ProgressLabel:
            id: step_info
            pos_hint: {'center_x': 0.5, 'center_y': 0.25}
            valign: 'center'

<DbPopulatePopup>:
    title: "Populating Database"
    on_open: self.start()
    size_hint_x: 0.8
    size_hint_y: None
    height: 200

<InventoryInitPopup>:
    title: "Initializing Inventory"
    size_hint_x: 0.8
    size_hint_y: None
    height: self.width * 0.3
    on_open: self.parts_init()
    prime_prompt: prime_prompt
    BoxLayout:
        id: layout
        orientation: 'horizontal'
        Image:
            size_hint_x: None
            width: self.height
        Label:
            id: prime_prompt
            halign: 'left'
            valign: 'center'
            padding: (15, 15)
            text_size: self.size
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: None
            width: self.height
            Button:
                text: "Yes"
                on_release: root.next_part()
            Button:
                text: "No"
                on_release: root.dismiss()

BoxLayout:
    orientation: 'vertical'
    Button:
        text: "Populate Database"
        on_release: Factory.DbPopulatePopup().open()
    Button:
        text: "Initialize Inventory"
        on_release: Factory.InventoryInitPopup().open()
    Button:
        text: "Close App"
        on_release: app.stop()
